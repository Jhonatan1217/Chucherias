<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="image (1).png">
    <title>Chucherias</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1>üìö Sistema de Papeler√≠a</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Usuario:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Contrase√±a:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit">Iniciar Sesi√≥n</button>
            </form>
            <div id="loginError" class="error-message"></div>
        </div>
    </div>

    <!-- Pantalla Principal -->
    <div id="mainScreen" class="screen">
        <header>
            <h1>üìö Gesti√≥n de Papeler√≠a</h1>
            <div class="user-info">
                <span id="welcomeUser"></span>
                <button id="logoutBtn">Cerrar Sesi√≥n</button>
            </div>
        </header>

        <main>
            <!-- Secci√≥n para agregar productos -->
            <section class="add-product">
                <h2>‚ûï Agregar Producto</h2>
                <form id="addProductForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productName">Nombre del Producto:</label>
                            <input type="text" id="productName" required>
                        </div>
                        <div class="form-group">
                            <label for="productPrice">Precio:</label>
                            <input type="number" id="productPrice" step="0.01" min="0" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="productCategory">Categor√≠a:</label>
                            <select id="productCategory" required>
                                <option value="">Seleccionar categor√≠a</option>
                                <option value="escolar">Material Escolar</option>
                                <option value="oficina">Oficina</option>
                                <option value="arte">Arte y Manualidades</option>
                                <option value="tecnologia">Tecnolog√≠a</option>
                                <option value="papeleria">Papeler√≠a General</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="productStock">Stock:</label>
                            <input type="number" id="productStock" min="0" required>
                        </div>
                    </div>
                    <button type="submit">Agregar Producto</button>
                </form>
            </section>

            <!-- Secci√≥n para gestionar productos -->
            <section class="manage-products">
                <h2>üìã Gesti√≥n de Productos</h2>
                
                <!-- Filtros -->
                <div class="filters">
                    <div class="form-group">
                        <label for="filterCategory">Filtrar por categor√≠a:</label>
                        <select id="filterCategory">
                            <option value="">Todas las categor√≠as</option>
                            <option value="escolar">Material Escolar</option>
                            <option value="oficina">Oficina</option>
                            <option value="arte">Arte y Manualidades</option>
                            <option value="tecnologia">Tecnolog√≠a</option>
                            <option value="papeleria">Papeler√≠a General</option>
                        </select>
                    </div>
                    <button id="clearFilters">Limpiar Filtros</button>
                </div>

                <!-- Lista de productos -->
                <div class="products-list">
                    <div id="productsContainer"></div>
                </div>
            </section>

            <!-- Secci√≥n para cambiar precios -->
            <section class="price-management">
                <h2>üí∞ Gesti√≥n de Precios</h2>
                <div class="price-controls">
                    <div class="form-group">
                        <label for="selectProduct">Seleccionar Producto:</label>
                        <select id="selectProduct">
                            <option value="">Seleccionar producto</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newPrice">Nuevo Precio:</label>
                        <input type="number" id="newPrice" step="0.01" min="0">
                    </div>
                    <button id="updatePriceBtn">Actualizar Precio</button>
                </div>
                <div id="priceUpdateMessage" class="message"></div>
            </section>
        </main>
        <footer class="footer"><h3>todo los derechos reservados a @ Jhonatan Acevedo y Fabian Acevedo</h3></footer>
    </div>

    <script>
        // Datos de usuarios (en una aplicaci√≥n real esto estar√≠a en un servidor)
        const users = {
            'admin': 'admin123',
            'papeleria': 'papeleria2024',
            'usuario': '123456'
        };

        // Array para almacenar productos
        let products = [
            { id: 1, name: 'L√°pices HB', price: 2.50, category: 'escolar', stock: 50 },
            { id: 2, name: 'Cuadernos', price: 8.00, category: 'escolar', stock: 30 },
            { id: 3, name: 'Bol√≠grafos', price: 1.50, category: 'oficina', stock: 100 },
            { id: 4, name: 'Goma de borrar', price: 1.00, category: 'escolar', stock: 75 },
            { id: 5, name: 'Regla 30cm', price: 3.00, category: 'escolar', stock: 40 }
        ];

        let currentUser = null;
        let nextProductId = 6;

        // Elementos del DOM
        const loginScreen = document.getElementById('loginScreen');
        const mainScreen = document.getElementById('mainScreen');
        const loginForm = document.getElementById('loginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const addProductForm = document.getElementById('addProductForm');
        const productsContainer = document.getElementById('productsContainer');
        const selectProduct = document.getElementById('selectProduct');
        const updatePriceBtn = document.getElementById('updatePriceBtn');
        const filterCategory = document.getElementById('filterCategory');
        const clearFilters = document.getElementById('clearFilters');

        // Event Listeners
        loginForm.addEventListener('submit', handleLogin);
        logoutBtn.addEventListener('click', handleLogout);
        addProductForm.addEventListener('submit', handleAddProduct);
        updatePriceBtn.addEventListener('click', handleUpdatePrice);
        filterCategory.addEventListener('change', filterProducts);
        clearFilters.addEventListener('click', clearAllFilters);

        // Funci√≥n de login
        function handleLogin(e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('loginError');

            if (users[username] && users[username] === password) {
                currentUser = username;
                document.getElementById('welcomeUser').textContent = `Bienvenido, ${username}`;
                loginScreen.classList.remove('active');
                mainScreen.classList.add('active');
                loadProducts();
                loadProductSelect();
                errorDiv.textContent = '';
            } else {
                errorDiv.textContent = 'Usuario o contrase√±a incorrectos';
            }
        }

        // Funci√≥n de logout
        function handleLogout() {
            currentUser = null;
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            mainScreen.classList.remove('active');
            loginScreen.classList.add('active');
        }

        // Funci√≥n para agregar producto
        function handleAddProduct(e) {
            e.preventDefault();
            const name = document.getElementById('productName').value;
            const price = parseFloat(document.getElementById('productPrice').value);
            const category = document.getElementById('productCategory').value;
            const stock = parseInt(document.getElementById('productStock').value);

            const newProduct = {
                id: nextProductId++,
                name: name,
                price: price,
                category: category,
                stock: stock
            };

            products.push(newProduct);
            addProductForm.reset();
            loadProducts();
            loadProductSelect();
        }

        // Funci√≥n para cargar productos en la lista
        function loadProducts() {
            productsContainer.innerHTML = '';
            
            products.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product-card';
                productDiv.innerHTML = `
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p><strong>Categor√≠a:</strong> ${getCategoryName(product.category)}</p>
                        <p><strong>Precio:</strong> $${product.price.toFixed(2)}</p>
                        <p><strong>Stock:</strong> ${product.stock}</p>
                    </div>
                    <div class="product-actions">
                        <button onclick="deleteProduct(${product.id})" class="delete-btn">üóëÔ∏è Eliminar</button>
                    </div>
                `;
                productsContainer.appendChild(productDiv);
            });
        }

        // Funci√≥n para cargar productos en el select de cambio de precios
        function loadProductSelect() {
            selectProduct.innerHTML = '<option value="">Seleccionar producto</option>';
            products.forEach(product => {
                const option = document.createElement('option');
                option.value = product.id;
                option.textContent = `${product.name} - $${product.price.toFixed(2)}`;
                selectProduct.appendChild(option);
            });
        }

        // Funci√≥n para actualizar precio
        function handleUpdatePrice() {
            const productId = parseInt(selectProduct.value);
            const newPrice = parseFloat(document.getElementById('newPrice').value);
            const messageDiv = document.getElementById('priceUpdateMessage');

            if (!productId || !newPrice) {
                messageDiv.textContent = 'Por favor selecciona un producto e ingresa el nuevo precio';
                messageDiv.className = 'message error';
                return;
            }

            const productIndex = products.findIndex(p => p.id === productId);
            if (productIndex !== -1) {
                products[productIndex].price = newPrice;
                loadProducts();
                loadProductSelect();
                document.getElementById('newPrice').value = '';
                messageDiv.textContent = 'Precio actualizado correctamente';
                messageDiv.className = 'message success';
            }
        }

        // Funci√≥n para filtrar productos
        function filterProducts() {
            const selectedCategory = filterCategory.value;
            const filteredProducts = selectedCategory ? 
                products.filter(p => p.category === selectedCategory) : 
                products;

            productsContainer.innerHTML = '';
            filteredProducts.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'product-card';
                productDiv.innerHTML = `
                    <div class="product-info">
                        <h3>${product.name}</h3>
                        <p><strong>Categor√≠a:</strong> ${getCategoryName(product.category)}</p>
                        <p><strong>Precio:</strong> $${product.price.toFixed(2)}</p>
                        <p><strong>Stock:</strong> ${product.stock}</p>
                    </div>
                    <div class="product-actions">
                        <button onclick="deleteProduct(${product.id})" class="delete-btn">üóëÔ∏è Eliminar</button>
                    </div>
                `;
                productsContainer.appendChild(productDiv);
            });
        }

        // Funci√≥n para limpiar filtros
        function clearAllFilters() {
            filterCategory.value = '';
            loadProducts();
        }

        // Funci√≥n para eliminar producto
        function deleteProduct(id) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este producto?')) {
                products = products.filter(p => p.id !== id);
                loadProducts();
                loadProductSelect();
            }
        }

        // Funci√≥n auxiliar para obtener nombre de categor√≠a
        function getCategoryName(category) {
            const categoryNames = {
                'escolar': 'Material Escolar',
                'oficina': 'Oficina',
                'arte': 'Arte y Manualidades',
                'tecnologia': 'Tecnolog√≠a',
                'papeleria': 'Papeler√≠a General'
            };
            return categoryNames[category] || category;
        }

        // Cargar productos iniciales
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            loadProductSelect();
        });
    </script>
</body>
</html>
